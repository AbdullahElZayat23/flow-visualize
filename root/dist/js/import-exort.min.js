const importFileInput=document.getElementById("importFile");function updateFlowVisualization(e){try{loader.style.display="block",setTimeout(()=>{globalThis.selectedFlow=e,virhivKvetl(),loader.style.display="none",swal({title:"Success!",text:"Render Success,  "+globalThis.renderTimeText,icon:"success",button:"Ok"})},3e3)}catch(e){swal("Error","Render Fail","error")}}function exportFlow(e){loader.style.display="block";try{var t,o,r,a,n=e||globalThis.selectedFlow;n?(t=JSON.stringify(n),o=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(o),(a=document.createElement("a")).href=r,a.download=`${n.name}-extracted | ${(new Date).toISOString()}.json`||"flow.json",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)):swal({title:"No data to export",text:"There is no data to export at the moment.",icon:"info"})}catch(e){swal("Error","Export Fail","error")}finally{loader.style.display="none"}}function convertMongoDbTypesToJSON(r){return"object"!=typeof r||null===r?r:Array.isArray(r)?r.map(e=>convertMongoDbTypesToJSON(e)):Object.keys(r).reduce((e,t)=>{var o=r[t];if(o instanceof Date)e[t]=o;else if("function"==typeof o&&/^function\s+\w*\(\)\s+\{\s+\[native\s+code\]\s+\}$/.test(o.toString()))e[t]=o;else switch(o.constructor.name){case"ObjectID":e[t]=o.toString();break;case"NumberInt":e[t]=parseInt(o.valueOf());break;case"NumberDecimal":e[t]=parseFloat(o.valueOf());break;case"Date":e[t]=o.toISOString();break;default:e[t]=convertMongoDbTypesToJSON(o)}return e},{})}importFileInput.addEventListener("change",e=>{var e=e.target.files[0],t=new FileReader;t.addEventListener("load",e=>{try{var t=JSON.parse(e.target.result);t?.steps?.length?updateFlowVisualization(t):swal({title:"No Steps To Render",text:"There are no steps to render at the moment",icon:"info"})}catch(e){swal("Error","Failed to import JSON data. Please make sure the selected file contains valid / pure JSON data.","error")}importFileInput.value=""}),t.onerror=function(){swal("Error","Error While Reading The File","error")},t.readAsText(e)});